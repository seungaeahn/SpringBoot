<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
	    <meta charset="UTF-8">
	    <link rel="stylesheet" href="/css/styles.css" th:href="@{/css/styles.css}"/>
	    <title>View</title>
	</head>
	<body style="text-align: center;">
	    <h1>View</h1>
	    
	    <!--상품 수정하기 버튼 관리자만 볼 수 있게 해줌-->
	    <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/product/edit}">상품수정하기</a>
	    
	    <!--두 번째 방법-->
	    <a th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}" th:href="@{/product/edit}">상품 수정하기</a>
	    
	    
	    
	    <div th:if="${product.imgName != null and product.imgPath != null}">
	        <img th:src="@{${product.imgPath}}"/>
	    </div>
	    <div th:unless="${product.imgName != null and product.imgPath != null}">
	        <img th:src="@{'/img/notImg.jpg'}" />
	    </div>
	    <label>상품명</label>
	    <span th:text="${product.name}"></span>
	    <br>
	    <label>상세설명</label>
	    <span th:text="${product.text}"></span>
	    <br>
	    <label>가격</label>
	    <span th:text="${product.price}"></span>
	    <br>
	    <label>재고</label>
	    <span th:text="${product.stock}"></span>
	    <br>

	<!--댓글표시-->
	 <h2>댓글</h2>
	    <div th:each="comment :  ${product.comments}">
	    	<p th:text="${comment.content}">
	 	</div>
	
	<!--댓글입력폼-->
	<form th:action="@{/addComment}" method="post">
		<input type="hidden" name="productId" th:value="${product.id}">
		<label>댓글작성</label>
		<input type="text" id="commentContent" name="commentContent">
		<button type="submit">댓글등록</button>
	</form>
	
	<a th:href="@{/list}">돌아가기</a>
</body>
</html>